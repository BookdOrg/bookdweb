<!--
#########################################

    Business Page -- Consolidated View

########################################
-->
<div class="container-fluid">
    <div class="row" style="margin-top:20px; margin-bottom:20px;">
        <div class="col-xs-2 col-xs-offset-1" style="padding:0px;">
            <img ng-if="!business.photos" class="text-center" ng-src="{{business.icon}}"
                 uib-tooltip="Photos coming soon..."
                 tooltip-placement="right" style="border-radius:5%"></image>
                        <span ng-if="business.photos.length >1">
                            <img class="provider-photo-radius"
                                 ng-src="https://maps.googleapis.com/maps/api/place/photo?minwidth=150&maxwidth=200&minheight=150&maxheight=200&photoreference={{business.photos[0].photo_reference}}&key=AIzaSyAK1BOzJxHB8pOFmPFufYdcVdAuLr_6z2U">
                        </span>
        </div>
        <div class="col-xs-6 text-center">
            <h1 class='text-center' style="margin-top:5px;">{{business.name}}</h1>
            <h4 class="text-center">
                <uib-rating class="text-warning" ng-model="business.rating" max="max" readonly="isReadonly"
                            on-hover="hoveringOver(value)" on-leave="overStar = null"
                            titles="['one','two','three']">
                </uib-rating>
            </h4>
            <div class="col-xs-6 text-center">
                <h5><a href="{{business.url}}" target="_blank"><i class="fa fa-google-plus"></i> Google Plus Page</a>
                </h5>
                <h5><a href="{{business.website}}" target="_blank"> <i class="fa fa-globe"></i> Visit
                    {{business.name}}'s Website</a></h5>
                <h5><i class="fa fa-phone"></i> {{business.formatted_phone_number}}</h5>
            </div>
            <div class="business-hours col-xs-6">
                <li class="hours-list" ng-if="business.opening_hours"
                    ng-repeat="hours in business.opening_hours.weekday_text">
                    <h5 style="margin-top:2px; margin-bottom:2px;">{{hours}}</h5>
                </li>
                <h5 ng-if="!business.opening_hours">No information about {{business.name}}'s hours of operation is
                    available.</h5>
            </div>
        </div>
        <div class="col-xs-3">
            <iframe
                    width="100%"
                    height="40%"
                    frameborder="0" style="border:0"
                    ng-src="{{ business.place_id | staticMapsFilter }}" allowfullscreen>
            </iframe>
        </div>
    </div>
    <uib-tabset justified="true">
        <uib-tab>
            <uib-tab-heading>
                <i class="fa fa-calendar"></i> Services
            </uib-tab-heading>
            <div class="row services-associates-block">
                <!--
            #########################################

            Services Block

            ########################################
            -->
                <div class="text-center">
                    <h2 ng-if="business.info.services.length === 0">Services coming soon!</h2>
                </div>
            </div>
            <div class="row services-associates-block">
                <div class="col col-xs-4" style="margin-bottom:20px;"
                     ng-repeat="service in business.info.services track by $index">
                    <div class="row">
                        <a href="" ng-click="scheduleAppointment('login', 'business', service);">
                            <div class="col-xs-9">
                                <h4>{{service.name}}</h4>
                            </div>
                        </a>

                        <div class="col-xs-3" style="line-height:20px;">
                            <button class="btn btn-small btn-gradient-blue"
                                    ng-click="scheduleAppointment('login', 'business', service);">
                                {{service.price | currency}}
                            </button>
                            </div>
                        <div class="col-xs-9">
                            <h5 class="text-muted">{{service.description}}</h5>
                        </div>
                        <div class="col-xs-3">
                            <h5 class="text-muted">{{service.duration}} minutes</h5>
                        </div>
                        </div>
                    <hr class="full" style="margin:0px;">
                </div>
            </div>
        </uib-tab>
        <!--
 #########################################

     Employee Block

 ########################################
 -->
        <uib-tab>
            <uib-tab-heading>
                <i class="fa fa-users"></i> Staff
            </uib-tab-heading>
            <div class="row services-associates-block">
                <div class="col-xs-12 text-center">
                    <h2 class="text-center" ng-if="business.info.employees.length === 0">No Associates Listed
                        Yet!</h2>

                    <div class="row" ng-repeat="employee in business.info.employees" style="margin-bottom:20px;">
                        <div class="col col-xs-3">
                                <img class="associate-photo provider-photo-radius"
                                     ng-if="employee.provider === 'google_plus' && employee.photo"
                                     ng-src="{{employee.photo}}"/>
                                <img class="associate-photo provider-photo-radius"
                                     ng-if="employee.provider === 'google_plus' && !employee.photo"
                                     ng-src="{{cloudinaryDefaultPic}}"/>
                                <img class="associate-photo provider-photo-radius"
                                     ng-if="employee.provider === 'facebook'"
                                     ng-src="{{facebookApi}}{{employee.providerId}}/picture?type=large"/>

                                <img class="associate-photo"
                                     ng-if="!employee.avatarVersion && employee.provider === 'bookd'"
                                     ng-src="{{cloudinaryDefaultPic}}">
                                <img class="associate-photo"
                                     ng-if="employee.avatarVersion && employee.provider === 'bookd'"
                                     ng-src="{{cloudinaryBaseUrl}}{{employee.avatarVersion}}/profile/{{employee._id}}">
                        </div>
                        <div class="col col-xs-8 text-center">
                            <h4>{{employee.name}}</h4>
                            <uib-rating class="text-warning" ng-model="rate" max="max" readonly="isReadonly"
                                        on-hover="hoveringOver(value)" on-leave="overStar = null"
                                        titles="['one','two','three']">
                            </uib-rating>
                            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam sit amet sapien odio.
                                Fusce massa risus, pulvinar quis dui id, commodo laoreet felis.</p>
                            <a href="/user/{{employee._id}}/profile">View Profile</a>
                        </div>
                    </div>
                    <div class="row" ng-if="!business.info.employees">
                        <div class="col-xs-12">
                            <h1 class="text-center">Your business does not have any employee's registered yet.</h1>
                        </div>
                    </div>
                </div>
            </div>
        </uib-tab>
        <!--
     #########################################

         Reviews Block

     ########################################
     -->
        <uib-tab>
            <uib-tab-heading>
                <i class="fa fa-commenting"></i> Reviews
            </uib-tab-heading>
            <div class="row">
                <div class="col-xs-12">
                    <h2 class="text-center" ng-if="!business.reviews">No Reviews Yet!</h2>
                </div>
            </div>
            <div class="row" style="margin-top:20px;">
                <div class="col-xs-4 " ng-repeat="review in business.reviews track by $index">
                    <div class="reviewBox">
                        <img ng-src="{{review.user.image_url}}" style="border-radius:20%">
                        <br>User: <span><a href="{{review.author_url}}">{{review.author_name}}</a></span>
                        <br>
                        Rating: {{review.rating}}
                        <br>
                        {{review.text}}
                    </div>
                    <hr class="full">
                </div>
            </div>
            <div class="row text-center">
                <div class="col-xs-12">
                    <img src="/images/powered_by_google_on_white_hdpi.png">
                </div>
            </div>
        </uib-tab>
    </uib-tabset>
</div>