<!-- 
#########################################

	Regular View

########################################
-->
<div ng-if="currentUser._id !== business.info.owner" class="container">
	<div class="page-header">
		<h1 class='text-center'>{{business.name}}</h1>
		<img ng-if="business.info.claimed" ng-src="{{business.info.icon}}" style="border-radius:20%"></image>
		<img ng-if="!business.info.claimed" ng-src="{{business.info.icon}}" style="border-radius:20%"></image>
		<!-- {{business.name}} -->
		
		<br>
		Rating: {{business.rating}}
		<br>
		Google Places: <a href="{{business.url}}">{{business.url}}</a>
		<br>
		Website: <a href="{{business.website}}">{{business.website}}</a>
		<br>
		Hours:
		<br>
		Phone: {{business.formatted_phone_number}}
		<br>
		Address: {{business.formatted_address}}
	</div>
		<!-- 
	#########################################

		Services Block

	########################################
	-->
	<h3 class="text-center">Services</h3>
	<div class="row">
		<div class="well col-md-3" style="height:200px;" ng-repeat="service in business.info.services">
			<div class="">
				<h4>{{service.name}}</h4>
				<h5>Price: ${{service.price}}</h5>
				<p>Duration: {{service.duration}} minutes</p>
				<p>{{service.description}}</p>
			</div>
			<div>
			<button class="btn btn-primary text-center" ng-click="openService('lg');setService(service)">Book Appointment</button>
			</div>
		</div>
	</div>
	<div class="row" ng-if="!business.info.claimed">
		<h1 class="text-center">This business has not been claimed and does not offer services through Book'd yet.</h1>
	</div>
	<!-- 
	#########################################

		Employee Block

	########################################
	-->
	<div class="row">
		<h3 class="text-center ">Employee's</h3>
		<span class="text-center">
			<alert ng-show="employeeError.message" type="danger" dismiss-on-timeout="1000" close="removeAlert()">{{employeeError.message}}</alert>
		</span>
	</div>
	<div class="row">
		<div class="well col-md-3 text-center" ng-repeat="employee in business.info.employees">
			<img ng-if="!employee.avatarVersion" ng-src="{{cloudinaryDefaultPic}}">
          	<img ng-if="employee.avatarVersion" ng-src="{{cloudinaryBaseUrl}}{{employee.avatarVersion}}/profile/{{employee._id}}">
			<div class="">
				<h4><a href="#/user/{{employee._id}}/profile">{{employee.firstName}} {{employee.lastName}}</a></h4>
				<h5>Rating:</h5>
				<h5>Snippet:</h5>
			</div>
		</div>
		<div class="row" ng-if="!business.info.employees">
			<h1 class="text-center">Your business does not have any employee's registered yet.</h1>
		</div>
	</div>
		<!-- 
	#########################################

		Reviews Block

	########################################
	-->	
	<div class="row">
		<h3 class="text-center">Reviews</h3>
		<div class="well col-md-3" ng-repeat="review in business.reviews track by $index">
			<img ng-src="{{review.user.image_url}}" style="border-radius:20%"></img>
			<br>User: <a href="{{review.author_url}}">{{review.author_name}}</a></span>
			<br>
			Rating: {{review.rating}}
			<br>
			{{review.text}}
		</div>
	</div>
<!-- 	<div ng-if="!lbusiness.claimed" class="row text-center">
		<a href="#/claim/{{business.id}}">Claim Business</a>
	</div> -->
</div>

<!-- 
#########################################

	Business Owner View

########################################
-->
<div ng-if="currentUser._id == business.info.owner" class="container">
	<div class="page-header">
		<button class="btn btn-primary col-xs-offset-11 col-sm-offset-11 col-md-offset-11 col-lg-offset-11">Edit</button>
		<h1 class='text-center'>{{business.name}}</h1>
		<img ng-if="business.info.claimed" ng-src="{{business.info.icon}}" style="border-radius:20%"></image>
		<img ng-if="!business.info.claimed" ng-src="{{business.info.icon}}" style="border-radius:20%"></image>
		<!-- {{business.name}} -->
		
		<br>
		Rating: <img ng-src="{{business.rating_img_url}}"></image>
		<br>
		Google Places: <a href="{{business.url}}">{{business.url}}</a>
		<br>
		Business Website: <a href="{{business.website}}">{{business.website}}</a>
		<br>
		Hours:
		<br>
		Location: {{business.formatted_address}}
		<br>
		Phone: {{business.formatted_phone}}
	</div>
		<!-- 
	#########################################

		Services Block

	########################################
	-->
	<div class="row">
		<div class="btn-group col-xs-8 col-sm-4 col-md-3 col-xs-offset-4 col-sm-offset-8 col-md-offset-9 col-lg-offset-9" role="group">
			<button ng-click="open()" class="btn btn-primary">Add Service</button>
			<button class="btn btn-warning">Edit Services</button>
		</div>
		<h3 class="text-center ">Services</h3>
	</div>
	<div class="row">
		<div class="well col-md-3" style="height:200px;" ng-repeat="service in business.info.services">
			<div class="">
				<h4>{{service.name}}</h4>
				<h5>Price: ${{service.price}}</h5>
				<p>Duration: {{service.duration}} minutes</p>
				<p>{{service.description}}</p>
			</div>
			<div>
			<button class="btn btn-primary text-center">Book Appointment</button>
			</div>
		</div>
	</div>
	<div class="row" ng-if="!business.info.services">
		<h1>Your business has not been claimed and does not offer services through Book'd yet.</h1>
	</div>
		<!-- 
	#########################################

		Employee Block

	########################################
	-->	
	<div class="row">
		<div class="btn-group col-xs-10 col-sm-5 col-md-5 col-xs-offset-4 col-sm-offset-8 col-md-offset-9 col-lg-offset-9" role="group">
			<button ng-click="openEmployee()" class="btn btn-primary">Add Employee</button>
			<button class="btn btn-warning">Edit Employee's</button>
		</div>
		<h3 class="text-center ">Employee's</h3>
		<span class="text-center">
			<alert ng-show="employeeError.message" type="danger" dismiss-on-timeout="1000" close="removeAlert()">{{employeeError.message}}</alert>
		</span>
	</div>
	<div class="row">
		<div class="well col-md-3 text-center" ng-repeat="employee in business.info.employees">
			<img ng-if="!employee.avatarVersion" ng-src="{{cloudinaryDefaultPic}}">
          	<img ng-if="employee.avatarVersion" ng-src="{{cloudinaryBaseUrl}}{{employee.avatarVersion}}/profile/{{employee._id}}">
			<div class="">
				<h4><a href="#/user/{{employee._id}}/profile">{{employee.firstName}} {{employee.lastName}}</a></h4>
			</div>
		</div>
		<div class="row" ng-if="!business.info.employees">
			<h1 class="text-center">Your business does not have any employee's registered yet.</h1>
		</div>
	</div>
	<!-- 
	#########################################

		Reviews Block

	########################################
	-->	
	<div class="row">
		<h3>Reviews</h3>
		<div class="row">
			<div class="well col-md-3" ng-repeat="review in business.reviews track by $index">
				<img ng-src="{{review.user.image_url}}" style="border-radius:20%"></img>
				<br>User: <span><a href="{{review.author_url}}">{{review.author_name}}</a></span>
				<br>
				Rating: {{review.rating}}
				<br>
				{{review.text}}
			</div>
		</div>
	</div>
	<div ng-if="!business.info.claimed" class="row text-center">
		<a href="#/claim/{{business.id}}">Claim Business</a>
	</div>
</div>
<!-- 
#########################################

	Schedule service Modal

########################################
-->

<script type="text/ng-template" id="scheduleServiceModal.html">
    <div class="modal-header">
        <h3 class="modal-title text-center">{{service.name}}</h3>
    </div>
    <div class="modal-body container-fluid">
      <ul class="nav nav-tabs" id="tabContent">
        <li class="active"><a data-target="#details" data-toggle="tab">Details</a></li>
        <li><a data-target="#employees" data-toggle="tab">Employees</a></li>
        <li><a data-target="#schedule" data-toggle="tab">Schedule</a></li>
      </ul>
  
  		<div class="tab-content">
	        <div class="tab-pane active" id="details">
	          <div class="control-group">
	            <div class="row text-center">
	            	<h5>Price: ${{service.price}}</h5>
	            	<h5>Duration: {{service.duration}} minutes.</h5>
	            	<h5>{{service.description}}</h5>
	            </div>
	          </div>
	        </div>
	        <div class="tab-pane" id="employees">
	          	<div class="row text-center" style="margin-left:10px;margin-right:10px;">
	            	<h3>Select an Associate</h3>
	            	<div class="col col-md-3 well" ng-repeat="employee in service.employees">
	            		<img ng-if="!employee.avatarVersion" ng-src="{{cloudinaryDefaultPic}}">
	          			<img ng-if="employee.avatarVersion" ng-src="{{cloudinaryBaseUrl}}{{employee.avatarVersion}}/profile/{{employee._id}}">
	            		<h5>{{employee.firstName}} {{employee.lastName}}</h5>
	            		<br>
	            		<label for="selectEmployee">Select</label>
	            		<input name="selectEmployee" ng-click="selectEmployee(employee)" type="radio">
	            	</div>
	            </div>
	        </div> 
	        <div class="tab-pane" id="schedule">
	        	<div class="row">
	        		<div class="col col-md-6 text-center">
		          		<h4>Choose a Date.</h4>
		          		<div style="display:inline-block; min-height:290px;">
					      <datepicker ng-model="selectedDate" min-date="minDate" show-weeks="true" class="well well-sm" custom-class="getDayClass(date, mode)"></datepicker>
					    </div>
				    </div>
				    <div class="col col-md-6 text-center">
				    	<h4>Available Times</h4>
				    	<div class="col col-md-3" ng-repeat="time in availableTimes">
				    		<button ng-class="{disabled: !time.available}" class="btn btn-primary" style="margin-bottom:5px;">
				    		{{time.time}}
				    		<!-- <span ng-if="!time.booked">Available</span> -->
				    		</button>
				    	</div>
					</div>
	          	</div>
	          	<!-- <div class="row text-center"> -->
	          		
	          	<!-- </div> -->
	        </div>
		</div>
   </div>
    <div class="modal-footer">
    	<button class="btn btn-warning" ng-show="appointment" ng-click="cancel()">Cancel</button>
        <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
    </div>
</script>
<!-- 
#########################################

	New service Modal

########################################
-->
<script type="text/ng-template" id="addServiceModal.html">
        <div class="modal-header">
            <h3 class="modal-title text-center">New Service</h3>
        </div>
        <div class="modal-body">
            <div class="row">
            	<form>
            		<div class="form-group col-md-12">
	            		<label for="serviceName">Service Name:</label>
	            		<input class="form-control" id="serviceName" ng-model="service.name">
	            	</div>
	            	<div class="col-md-12">
	            		<label>Employees:</label>
	            	</div>
	            	<div class="col-md-12">
	            		<div ng-dropdown-multiselect="" options="business.employees" extra-settings="settings" selected-model="serviceEmployees"></div>
	            	</div>
	            	<div class="form-group col-md-12">
	            		<label for="price">Price:</label>
	            		<select class="form-control" id="price" ng-model="service.price" placeholder="$0">
	            			<option value="" disabled selected>Select Service Price</option>
	            			<option value="0">$0</option>
	            		</select>
	            	</div>
	            	<div class="form-group col-md-12">
	            		<label>Duration:</label>
	            		<select class="form-control" ng-model="service.duration">
	            			<option value="">Select a Duration</option>
	            			<option value="15">15 Minutes</option>
	            			<option value="30">30 Minutes</option>
	            			<option value="60">60 Minutes</option>
	            		</select>
	            	</div>
	            	<div class="form-group col-md-12">
	            		<label for="serviceDescription">Description:</label>
	            		<textarea class="form-control" id="serviceDescription" ng-model="service.description"></textarea>
	            	</div>
            	</form>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-primary" ng-click="ok(service)">Create</button>
            <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
        </div>
</script>

<!-- 
#########################################

	New Employee Modal

########################################
-->
<script type="text/ng-template" id="addEmployeeModal.html">
        <div class="modal-header">
            <h3 class="modal-title text-center">New Employee</h3>
        </div>
        <div class="modal-body">
            <div class="row">
            	<form>
            		<div class="form-group col-md-12">
	            		<label for="employeeId">Employee Id:</label>
	            		<input class="form-control" id="employeeId" ng-model="id">
	            	</div>
	            	<div class="col-md-12">
	            		<button class="btn btn-success col-sm-offset-6 col-md-offset-6" ng-click="findEmployee(id)">Search</button>
            		</div>
            		<div class="col-md-12" ng-if="employee">
            			<img ng-if="employee.avatarVersion" ng-src="{{cloudinaryBaseUrl}}{{employee.avatarVersion}}"
            				style="height:100px;width:100px;"></img>
            			<img ng-if="!employee.avatarVersion" ng-src="{{cloudinaryDefaultPic}}"
            				style="height:100px;width:100px;"></img>
            			<br>Id: {{employee._id}}
            			<br>Name: {{employee.firstName}} {{employee.lastName}}
            			<br>Username: {{employee.username}}
            		</div>
            	</form>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-primary" ng-click="create(employee._id)">Register Employee</button>
            <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
        </div>
    </script>