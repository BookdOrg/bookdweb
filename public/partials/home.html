<div class="container-fluid">
<div class="row">
  <div class="page-header">
      <h1 class="text-center">Job Postings
        <span>
          
        </span>
      </h1>
      <h3>Location Info: <i ng-if="loadingLocation" class="fa fa-spinner fa-pulse"></i><br>         
        Latitude:{{myPosition.coords.latitude}} <br>
        Longitude: {{myPosition.coords.longitude}} <br>
        Address: {{currLocation.address}}<br>
        City: {{currLocation.city}}<br>
        State: {{currLocation.state}}<br>
        Country: {{currLocation.country}}<br>
        Postal Code: {{currLocation.zip}}<br>
        <p ng-show="myPosition.error">
          Error ({{myPosition.error.code}}): {{myPosition.error.message}}
        </p>
      </h3>
      <div class="text-center">
        <button class="btn btn-success" ng-click="open('lg')">Request A Service</button>
      </div>
    </div>
</div>
<div class="row">
  <div class="col col-xs-6 col-sm-6 col-md-6 col-lg-6">
    <h3 class="text-center">Recent Acitivity</h3>
    <div class="well contentBox">
      <div class="text-left"ng-repeat="post in recentPosts" style="margin-top:5px;">
        <!-- <span ng-bind-html="post.image"></span> -->
        <span ng-if="post.author.avatarVersion">
          <image ng-src="{{cloudinaryBaseUrl}}{{post.author.avatarVersion}}/profile/{{post.author._id}} ">
        </span>
        <span ng-if="!post.author.avatarVersion">
          <image ng-src="{{cloudinaryDefaultPic}}">
        </span>
        <span style="font-size:20px; margin-left:10px;">
          <a href="#/posts/{{post._id}}">
            {{post.title | limitTo:32}}          
          </a>
        </span>
        <br>
        <span ng-show="post.author">
          Author: <a href="#/user/{{post.author._id}}/profile">{{post.author.username}}</a> on {{post.timestamp}} |
        </span>
        <span>
         {{post.reviews.length}} Comments <i class="fa fa-comments"></i>
        </span>
      </div>
    </div>
  </div>
  <div class="col col-xs-6 col-sm-6 col-md-6 col-lg-6">
    <h3 class="text-center">Near Me</h3>
    <div class="well contentBox">
      <div class="text-left"ng-repeat="post in posts" style="margin-top:5px;">
        <span ng-if="post.author.avatarVersion">
          <image ng-src="{{cloudinaryBaseUrl}}{{post.author.avatarVersion}}/profile/{{post.author._id}} ">
        </span>
        <span ng-if="!post.author.avatarVersion">
          <image ng-src="{{cloudinaryDefaultPic}}">
        </span>
        <span style="font-size:20px; margin-left:10px;">
          <a href="#/posts/{{post._id}}">
            {{post.title | limitTo:32}}
          </a>
        </span>
        <br>
        <span ng-show="post.author">
          Author: <a href="#/user/{{post.author._id}}/profile">{{post.author.username}}</a> on {{post.timestamp}} |
         {{post.reviews.length}} Comments <i class="fa fa-comments"></i>
        </span>
      </div>
    </div>
  </div>
</div>
<script type="text/ng-template" id="myModalContent.html">
      <div class="modal-header">
          <h3 class="text-center">Add a new post</h3>
      </div>
      <div class="modal-body container">

        <form style="margin-top:30px;" ng-show="isLoggedIn()">

          <div class="row">
            <div class="form-group col-sm-7 col-md-5 col-lg-4">
              <label for="title"> Title: </label>
              <input type="text" id="title" class="form-control"
                placeholder="Title" g-places-autocomplete options="autocompleteOptions" ng-model="title"></input>
            </div>

            <div class="form-group col-sm-7 col-md-5 col-lg-4">
              <label for="city"> City: </label>
              <input class="form-control" g-places-autocomplete options="autocompleteOptions" ng-show="jobLocation.city" ng-model="jobLocation.city"></input>
              <input class="form-control" g-places-autocomplete options="autocompleteOptions" ng-show="!jobLocation.city" ng-model="jobLocation.city" placeholder="City"></input>
            </div>
          </div>
          <div class="row">
            <div class="form-group col-sm-7 col-md-5 col-lg-4">
              <label for="state"> State: </label>
              <input class="form-control" ng-show="jobLocation.state" ng-model="jobLocation.state"></input>
              <input class="form-control" ng-show="!jobLocation.state" ng-model="jobLocation.state" placeholder="State"></input>
            </div>

            <div class="form-group col-sm-7 col-md-5 col-lg-4">
              <label for="country"> Country: </label>
              <input class="form-control" ng-show="jobLocation.country" ng-model="jobLocation.country"></input>
              <input class="form-control" ng-show="!jobLocation.country" ng-model="jobLocation.country" placeholder="Country"></input>
            </div>
          </div>

          <div class="row">
            <div class="form-group col-sm-7 col-md-5 col-lg-4">
              <label for="zipcode"> Zipcode: </label>
              <input ng-if="jobLocation.zip" id="zipCode" class="form-control"
                 ng-model="jobLocation.zip"></input>
              
              <input ng-if="!jobLocation.zip" id="zipCode" class="form-control"
                placeholder="Postal Code" ng-model="zipCode"></input>
            </div>

            <div class="form-group col-sm-7 col-md-5 col-lg-4">
              <label for="rate"> Hourly Rate: </label>
              <div class="input-group">
                <span class="input-group-addon" id="hrAddon">$</span>
                <input type="text" class="form-control"
                placeholder="Rate" ng-model="rate" describedby="hrAddon"></input>
                <span class="input-group-addon" id="hrAddon">/hr</span>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="form-group col-sm-7 col-md-10 col-lg-8">
              <label for="description"> Description: </label>
              <textarea type="text" class="form-control"
                placeholder="Description" ng-model="description"></textarea>
            </div>
          </div>
        <div class="row">
          <div class="form-group col-sm-7 col-md-5 col-lg-4">
            <label for="startDate">Start Date: </label>
            <input id="startDate" type="date" class="form-control"
              placeholder="" ng-model="startDate"></input>
          </div>
          <div class="form-group col-sm-7 col-md-5 col-lg-4">
          <label for="endDate">End Date: </label>
            <input id="endDate" type="date" class="form-control"
              placeholder="" ng-model="endDate"></input>
          </div>
        </div>
      </div>
      <div class="modal-footer">
          <div class="col-md-12 text-center">
            <button type="submit" class="btn btn-primary" ng-click="addPost()">Post</button>
            <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
          </div>
        </form>
      </div>
</script>
    <div ng-hide="isLoggedIn()">
      <h3>You need to <a href="/#/login">Log In</a> or <a href="/#/register">Register</a> before you can add a post.</h3>
    </div>
  </div>
</div>
</div>